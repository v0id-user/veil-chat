#!/usr/bin/env sh

# Add colors for better visibility
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo "${YELLOW}üîç Running pre-commit checks...${NC}"

# Run formatting first
echo "\n${YELLOW}Running Prettier...${NC}"
if npm run format; then
    echo "${GREEN}‚úÖ Code formatting passed!${NC}"
    # Stage the formatted files
    git add -u
else
    echo "${RED}‚ùå Code formatting failed! Please fix the formatting issues.${NC}"
    exit 1
fi

# Run linting after formatting
echo "\n${YELLOW}Running ESLint...${NC}"
if npm run lint; then
    echo "${GREEN}‚úÖ Linting passed!${NC}"
else
    echo "${RED}‚ùå Linting failed! Please fix the errors above.${NC}"
    exit 1
fi

echo "\n${GREEN}‚ú® All checks passed! Proceeding with commit...${NC}"
